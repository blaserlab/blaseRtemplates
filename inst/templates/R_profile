# source("renv/activate.R")
renv::settings$snapshot.type("all")
options(renv.config.auto.snapshot = TRUE)
options(renv.config.install.verbose = TRUE)

# set default git protocol to https
options(usethis.protocol  = "https")

# the following line sets the default editor to nano
# if you want to use something else like vim, put it in your ~/.Rprofile
options(editor="nano")

# remove the automatic biostrings coloring which is really slow
options(Biostrings.coloring = FALSE)

# make the R prompt show the active git branch
suppressMessages(if (!require("prompt")) install.packages("prompt"))
if (prompt::is_git_dir()) prompt::set_prompt(paste0("[ ", gert::git_branch(), " ] > "))

# copy the git credential store pat to the environment variable so they are in sync
Sys.setenv(GITHUB_PAT = gitcreds::gitcreds_get(use_cache = FALSE)$password)

# Enable universe(s) by blaserlab
options(repos = c(
  blaserlab = 'https://blaserlab.r-universe.dev',
  CRAN = 'https://cloud.r-project.org'))

local({if (length(.libPaths()) > 1) {
  msg <- "\nUsing libraries at paths:"
} else {
  msg <- "\nUsing library at path:"
}
libs <- paste("-", .libPaths(), collapse = "\n")
cat(msg, libs, sep = "\n")
})
cat("\n")

if ("RENV_PROJECT" %in% names(Sys.getenv())) {
  cat("Linked to renv cache:\n")
  cat("-", renv::paths$cache(), "\n\n")
  } else {
  cat("\n***  Warning:  you are not in an active renv project! ***\n")
  cat("- Some functions may be unavailable.\n\n")
  }


if (file.exists("~/.Rprofile")) source("~/.Rprofile")

