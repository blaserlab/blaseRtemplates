<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="This package generates an R project with customized templates.  It also packages bash scripts for blaserlab collaborative git workflow.">
<title>Generates a structured R project with custom templates.  • blaseRtemplates</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Generates a structured R project with custom templates. ">
<meta property="og:description" content="This package generates an R project with customized templates.  It also packages bash scripts for blaserlab collaborative git workflow.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">blaseRtemplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9155</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/establish.html">Establish a blaseRtemplates Installation</a>
    <a class="dropdown-item" href="articles/initialize.html">Initialize a blaseRtemplates Project</a>
    <a class="dropdown-item" href="articles/install.html">Installing Packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/blaserlab/blaseRtemplates/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="blasertemplates">blaseRtemplates<a class="anchor" aria-label="anchor" href="#blasertemplates"></a>
</h1></div>
<p>The goal of blaseRtemplates is to provide a skeleton for project setup based on the <code>usethis</code> package.</p>
<p><code>usethis</code> is great but here we expand on the idea to provide additional R scripts that are always useful to have in your project.</p>
<p>This package provides some helpers for working with git via R. These may be helpful for new users and convenient for experienced users. The workflow provided in <code>git_commands.R</code> aims to minimize or avoid conflicts, but working in the terminal may still be necessary for complicated situations.</p>
<p>New from versions 0.0.0.0125 onward I have implemented a new cache structure. The cacheing approach is similar to renv. However the system of reconciliation between versions is much more straightforward. In addition, by default when starting a new project, you will automatically have the latest versions of all packages available to you. All project-specific libraries are symlinked to the main cache to save disk space.</p>
<p>See below for minimal examples</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of blaseRtemplates like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  blaserlab <span class="op">=</span> <span class="st">'https://blaserlab.r-universe.dev'</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"blaseRtemplates"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="initial-configuration">Initial configuration<a class="anchor" aria-label="anchor" href="#initial-configuration"></a>
</h2>
<p>Edit your .Renvironment file to set up the blaseRtemplates cache. If you are a system administrator, edit the Renviron.site file:</p>
<pre><code>BLASERTEMPLATES_CACHE_ROOT=&lt;a convenient directory&gt;
R_PKG_CACHE_DIR=&lt;same as BLASERTEMPLATES_CACHE_ROOT&gt;/pkgcache</code></pre>
<p>This will set up the blaseRtemplates cache folder and will tell <code>pak</code> where to cache source files. Then run:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">file.path</span>(<span class="sc">&lt;</span>same as BLASERTEMPLATES_CACHE_ROOT<span class="sc">&gt;</span>, <span class="st">"library"</span>))</span></code></pre></div>
<p>Restart R.</p>
</div>
<div class="section level2">
<h2 id="initialize-a-new-project">Initialize a New Project<a class="anchor" aria-label="anchor" href="#initialize-a-new-project"></a>
</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>blaseRtemplates<span class="sc">::</span><span class="fu">initialize_project</span>(<span class="at">path =</span> <span class="sc">&lt;</span><span class="er">/</span>path<span class="sc">/</span>to<span class="sc">/</span>project<span class="sc">&gt;</span>)</span></code></pre></div>
<p>If you have already set up the cache, the new projet will automatically have access to the latest version of all packages in the cache.</p>
<p>If you have not set up the cache, you will have a list of 130 or so packages which are all the recursive dependencies of <code>blaseRtemplates</code>. You will want to install a long list of packages which you have already been using. See the next section for how to install new packages.</p>
</div>
<div class="section level2">
<h2 id="install-a-new-package">Install a new package<a class="anchor" aria-label="anchor" href="#install-a-new-package"></a>
</h2>
<p>This is how you install a single package:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install a new package or get the latest version from a repository</span></span>
<span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/install_one_package.html">install_one_package</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"&lt;package_name&gt;"</span>, how <span class="op">=</span> <span class="st">"new_or_update"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a fresh link to the newest version available in the cache</span></span>
<span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/install_one_package.html">install_one_package</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"&lt;package_name&gt;"</span>, how <span class="op">=</span> <span class="st">"link_from_cache"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get a specific version in the cache</span></span>
<span></span>
<span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/install_one_package.html">install_one_package</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"&lt;package_name&gt;"</span>, how <span class="op">=</span> <span class="st">"link_from_cache"</span>, which_version <span class="op">=</span> <span class="st">"1.0.0."</span><span class="op">)</span></span></code></pre></div>
<p>You can find a human-readable table with all of the packages in the cache at BLASERTEMPLATES_CACHE_ROOT/package_catalog.tsv.</p>
<p>Use this trick to install a long list of packages which you may have been using:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>packages_to_install <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">&lt;</span>vector of package names<span class="sc">&gt;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>safely_install <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">safely</span>(blaseRtemplates<span class="sc">::</span>install_one_package)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>installation <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">.x =</span> packages_to_install,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">.f =</span> \(x) <span class="fu">safely_install</span>(x, <span class="at">how =</span> <span class="st">"new_or_update"</span>)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>transposed_installation <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">transpose</span>(installation)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>uninstalled <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2_chr</span>(<span class="at">.x =</span> transposed_installation<span class="sc">$</span>error,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">.y =</span> packages_to_install,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">.f =</span> \(x, y) {</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>              <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(x)) {</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>                <span class="fu">return</span>(y)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>              } <span class="cf">else</span> {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>                <span class="fu">return</span>(<span class="st">"ok"</span>)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>              }</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>uninstalled <span class="ot">&lt;-</span> uninstalled[uninstalled <span class="sc">!=</span> <span class="st">"ok"</span>]</span></code></pre></div>
<p>The code above will install your list of packages and capture error messages from those that fail to install. Uninstalled will give you those package names. These are likley going to be base packages which are not distributed in CRAN and you don’t need to cahce or packages from non-standard repositories or local source files which you will have to install manually.</p>
</div>
<div class="section level2">
<h2 id="get-a-new-project-library">Get a new project library<a class="anchor" aria-label="anchor" href="#get-a-new-project-library"></a>
</h2>
<p>You can use this function to replace the entire project library with a new one. By default, the function will install the newest version available. After doing so it will generate a new project library catalog. This is a tsv file that lives within the project. It indicates all available and actively used packages, based on <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code> and <code>package::</code> calls in the R code. This file is meant to be tracked by git and so can provide version control and reproducibility for the packages used in your project.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/get_new_library.html">get_new_library</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Say, however, that you are collaborating on this project. Another person may be using a different set of packages. This can in some circumstances change output. To adopt the package library used by a different individual, supply this as the argument to <code><a href="reference/get_new_library.html">get_new_library()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/get_new_library.html">get_new_library</a></span><span class="op">(</span><span class="st">"other_user_projet.tsv"</span><span class="op">)</span></span></code></pre></div>
<p>These files are created in a structured way; the files should always be named <user>_<project>.tsv. Therefore they should never cause git conflicts. You can use a simple anti_join to preview the differences between two project library catalogs.</project></user></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>my_lib <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_tsv</span>()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>their_lib <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_tsv</span>()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(my_lib, their_lib, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"version"</span>))<span class="er">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="project-data-packages">Project Data Packages<a class="anchor" aria-label="anchor" href="#project-data-packages"></a>
</h2>
<p>BlaseRtemplates handles project data in slightly differnt way than regular packages. Run this function to install, update, and load package data:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/project_data.html">project_data</a></span><span class="op">(</span><span class="st">"/path/to/directory/containing/data_package"</span><span class="op">)</span></span></code></pre></div>
<p>This function:</p>
<ol style="list-style-type: decimal">
<li>Goes to the supplied directory.</li>
<li>Checks for the latest version of the package according to the standard version numbering scheme.</li>
<li>Compares this version to the installed version in the cache and in the project library.</li>
<li>Updates cache and/or project library to the newest version if and only if necessary.</li>
<li>If a specific version of the data package is supplied, e.g. *1.0.1.tar.gz, it will install and load that one. This allows installation of old versions of data. Note however, it may be faster in this case to install from the cache if it is present there using <code><a href="reference/install_one_package.html">install_one_package()</a></code>.</li>
<li>Loads the package into a hidden environment as a pointer, from where it is loaded into memory only when called.</li>
</ol>
<p>This function should be executed together with all library calls for your project. See dependencies.R.</p>
</div>
<div class="section level2">
<h2 id="upgrade-a-project">Upgrade a project<a class="anchor" aria-label="anchor" href="#upgrade-a-project"></a>
</h2>
<p>You may wish to convert an existing project to a project that uses the new blaseRtemplates cache.</p>
<p>To do this, run:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">blaseRtemplates</span><span class="fu">::</span><span class="fu"><a href="reference/upgrade_bt.html">upgrade_bt</a></span><span class="op">(</span><span class="st">"/path/to/project"</span><span class="op">)</span></span></code></pre></div>
<p>This should will remove teh renv documents, create a new user_project folder and give you all of the newest versions available of all packages.</p>
<p>In order to avoid conflicts, you need to stop tracking your .Rprofile document. Activate the project, go to the terminal and run this command:</p>
<pre><code>git rm --cached .Rprofile
git add .gitignore
git commit -m "edited gitignore"</code></pre>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/blaserlab/blaseRtemplates/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/blaserlab/blaseRtemplates/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing blaseRtemplates</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Brad Blaser <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3168-5423" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Brad Blaser.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
