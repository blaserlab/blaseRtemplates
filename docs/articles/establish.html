<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Establish a blaseRtemplates Installation • blaseRtemplates</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Establish a blaseRtemplates Installation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blaseRtemplates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9217</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/establish.html">Establish a blaseRtemplates Installation</a></li>
    <li><a class="dropdown-item" href="../articles/initialize.html">Initialize a blaseRtemplates Project</a></li>
    <li><a class="dropdown-item" href="../articles/install.html">Installing Packages</a></li>
    <li><a class="dropdown-item" href="../articles/multiuser.html">Establish a Multi-User blaseRtemplates Installation</a></li>
    <li><a class="dropdown-item" href="../articles/project_data.html">Managing Project Data</a></li>
    <li><a class="dropdown-item" href="../articles/using_git.html">Using Git</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/blaserlab/blaseRtemplates/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Establish a blaseRtemplates Installation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/blaserlab/blaseRtemplates/blob/HEAD/vignettes/establish.Rmd" class="external-link"><code>vignettes/establish.Rmd</code></a></small>
      <div class="d-none name"><code>establish.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goals of blaseRtemplates are:</p>
<ol style="list-style-type: decimal">
<li><p>To establish an encapsulated computing environment for data
analysis in R.</p></li>
<li><p>To improve upon existing methods for installing software packages
and maintaining version control</p></li>
<li><p>To provide useful template scripts for setting up projects,
working with git, and doing other common, repetitive tasks.</p></li>
</ol>
<p>The result, I hope, will be reduced system footprint (storage),
faster package installation times, better reproducibility and an overall
improved user experience.</p>
</div>
<div class="section level2">
<h2 id="establishing-an-installation">Establishing an Installation<a class="anchor" aria-label="anchor" href="#establishing-an-installation"></a>
</h2>
<p>Unfortunately, the terms we use for setting up programs, files and
directories are overloaded. To distinguish the initial installation of
the directory structure for blaseRtemplates from other uses of the verb
“install”, I use the term “establish”. Sorry if that seems awkward.</p>
<p>First you must install the blaseRtemplates package using whatever
package installer you currently use. Assuming the base install function,
run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'blaseRtemplates'</span>, repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'https://blaserlab.r-universe.dev'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>What is r-universe? Basically it is CRAN without rules. In this case,
it hosts blaseRtemplates linux source code and pre-compiled binaries for
Windows and Mac.</p>
<p>Next, simply run the following command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/blaserlab/blaseRtemplates" class="external-link">"blaseRtemplates"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/establish_new_bt.html">establish_new_bt</a></span><span class="op">(</span>cache_path <span class="op">=</span> <span class="st">"&lt;some_directory&gt;/r_4_2_cache"</span>, project_path <span class="op">=</span> <span class="st">"&lt;some_directory&gt;/projects"</span><span class="op">)</span></span></code></pre></div>
<p>What will this do?</p>
<ul>
<li>It will create directories where indicated, write a standard
.Rprofile document, and modify the user .Renviron file to configure R
properly.<br>
</li>
<li>It will not overwrite existing directories and will fail when an
existing installation is already present in the same location.<br>
</li>
<li>The only modification outside of the provided directory is to the
.Renviron file. If you have existing configurations in your .Renviron
file, they will only be changed if they are conflicting. If this is
problematic, then you should archive your .Renviron file before running.
The new .Renviron file will cause R to use the new .Rprofile in the
cache directory and skip existing user- and project-level
.Rprofiles.</li>
</ul>
<p>Briefly, when R starts a new session, it looks for a series of files
to configure itself. This configuration includes environment variables
(in the .Renviron file) and any desired R code (in the .Rprofile file).
As included in this function, these configurations only affect user
experience i.e. they should not affect the results produced by your
code. By user experience I mean connection to the proper package
libraries and repositories and some safeguards to prevent working
outside of projects.</p>
<p>For more information on how R starts, see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Startup.html" title="R startup" class="external-link">this link.</a>.</p>
</div>
<div class="section level2">
<h2 id="directory-structure">Directory Structure<a class="anchor" aria-label="anchor" href="#directory-structure"></a>
</h2>
<pre><code>.
|-- projects
|   `-- baseproject
`-- r_4_2_cache
    |-- library
    |-- logs
    |-- source
    |-- user_project
    |-- dependency_catalog.tsv
    |-- package_catalog.tsv
    `-- .Rprofile</code></pre>
<p>First, note that two main subdirectories have been created in one
parent directory. This optional and can be specified by the function
inputs, but for a single user system it is recommended to keep them
together for the sake of organization.</p>
<ul>
<li><p>projects: where your projects should be initialized. They can go
anywhere but you should keep them here. The baseproject is created by
the establish_new_bt function. If you close a project without moving to
a new one or try to start a session outside of a project, it will bounce
you here. This prevents undesired operations in e.g. the home directory
or elsewhere.</p></li>
<li>
<p>r_4_2_cache: This holds all of the inner workings of the
blaseRtemplates system.</p>
<ul>
<li><p>library: The versioned/hashed package binary cache. Each package
is stored under the following rubric: name &gt; version &gt; hash &gt;
name &gt; contents. This structure is generated whenever blaseRtemplates
installs a new package in any project.</p></li>
<li><p>logs: collection of .Rhistory files. Rather than 1 endless file
(default), blaseRtemplates will store history files for each session by
user and date/time</p></li>
<li><p>source: Package source files. Used by the installer,
pak.</p></li>
<li><p>user_project: A collection of symlinks to versioned/hashed
packages in the library. This is identified as the first entry in
.libPaths() so it is where R looks first for packages. Why do this? 1.
It allows reproducibility. If I update a package for one project, it may
break something in an older project. This allows each project to have
its own set of packages. (The list of what versions are used is kept as
a tsv file within the project, so it is completely portable. Anyone who
wants to replicate your code just has to install that list of packages.)
2. It makes the system lightweight. Package code and more significantly,
data, is stored in one location and accessible to many projects,
according to version. Unlike renv, all of this except the tsv file is
done outside the project, so there are no broken links or large binaries
to transfer if someone else wants to work with your code.</p></li>
<li><p>dependency_catalog.tsv: a list of package dependencies by package
hash. Speeds up installation when linking packages from the cache to a
project.</p></li>
<li><p>package_catalog.tsv: the master catalog of packages available in
the cache.</p></li>
<li><p>.Rprofile: the Rprofile used on startup, as specified by the new
.Renviron file</p></li>
</ul>
</li>
</ul>
<p>The library directory is initially populated using all packages
available to R the local libraries. Depending on what is in those
libraries, and processing/network speeds, this may take some time.</p>
</div>
<div class="section level2">
<h2 id="upgrading-r-versions">Upgrading R versions<a class="anchor" aria-label="anchor" href="#upgrading-r-versions"></a>
</h2>
<p>Since package binaries don’t work across minor version changes in R,
e.g. 4.2 -&gt; 4.3, you will have to create a new cache directory each
time this changes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Brad Blaser.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
